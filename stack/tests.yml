version: '3.9'

services:
  app:
    entrypoint: tail -f /dev/null
    deploy:
      restart_policy:
        condition: any
    volumes:
      - type: bind
        source: ../config.json
        target: /etc/toxic/config.json
        read_only: true
    ports:
      - target: 8000
        published: 30130
        protocol: tcp
      - target: 8001
        published: 30132
        protocol: tcp
  db:
    ports:
      - target: 5432
        published: 30131
        protocol: tcp
